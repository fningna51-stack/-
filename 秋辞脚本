local repo = 'https://raw.githubusercontent.com/KingScriptAE/No-sirve-nada./refs/heads/main/'

-- 加载库文件
local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()
local SaveManager = loadstring(game:HttpGet(repo .. 'addons/SaveManager.lua'))()

local Options = Library.Options
local Toggles = Library.Toggles

-- 创建主窗口
local Window = Library:CreateWindow({
    Title = "秋辞缝合脚本",
    Footer = "免费版本 | 由 ks不知名的秋 老辞制作",
    Icon = 131153193945220,
    NotifySide = "Right",
    ShowCustomCursor = true,
})

-- 创建标签页
local Tabs = {
    PlayerTab = Window:AddTab("玩家", "user"),
    Main = Window:AddTab("墨水游戏", "paintbrush"),
    sbbn = Window:AddTab("99夜", "moon"),
    qwer = Window:AddTab("DOORS", "door-closed"),
    tyui = Window:AddTab("死铁轨", "train"),
    Settings = Window:AddTab("设置", "settings"),
}

-- 玩家标签页
local PlayerBox = Tabs.PlayerTab:AddLeftGroupbox("角色设置")
local PlayerBoxRight = Tabs.PlayerTab:AddRightGroupbox("更多功能")

-- 移动速度滑块
local walkSpeedValue = 16
PlayerBox:AddSlider("WalkSpeed", {
    Text = "移动速度",
    Default = 16,
    Min = 16,
    Max = 200,
    Rounding = 0,
    Suffix = " 速度",
    Callback = function(value)
        walkSpeedValue = value
        local player = game.Players.LocalPlayer
        if player.Character then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
    end
})

-- 跳跃高度滑块
local jumpPowerValue = 50
PlayerBox:AddSlider("JumpPower", {
    Text = "跳跃高度",
    Default = 50,
    Min = 50,
    Max = 200,
    Rounding = 0,
    Suffix = " 高度",
    Callback = function(value)
        jumpPowerValue = value
        local player = game.Players.LocalPlayer
        if player.Character then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.JumpPower = value
            end
        end
    end
})

-- 角色大小下拉菜单
PlayerBox:AddDropdown("CharacterSize", {
    Values = {"正常", "巨人", "迷你"},
    Default = 1,
    Multi = false,
    Text = "角色大小",
    Callback = function(option)
        local player = game.Players.LocalPlayer
        if player.Character then
            local scale = 1
            if option == "巨人" then 
                scale = 2 
            elseif option == "迷你" then 
                scale = 0.5 
            end

            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                local function setScale(part)
                    if part:IsA("BasePart") then
                        part.Size = part.Size * scale
                    end
                end

                for _, part in pairs(player.Character:GetDescendants()) do
                    pcall(setScale, part)
                end
            end
        end
        Library:Notify("角色大小已设置", "当前大小: " .. option, 2)
    end
})

-- 夜视开关
PlayerBox:AddToggle("NightVision", {
    Text = "夜视",
    Default = false,
    Tooltip = "开启/关闭夜视效果",
    Callback = function(value)
        if value then
            game.Lighting.Ambient = Color3.new(1, 1, 1)
        else
            game.Lighting.Ambient = Color3.new(0, 0, 0)
        end
    end
})

-- 功能按钮
local function AddScriptButton(group, text, funcOrUrl, description)
    group:AddButton({
        Text = text,
        Func = function()
            if type(funcOrUrl) == "function" then
                funcOrUrl()
            else
                loadstring(game:HttpGet(funcOrUrl, true))()
            end
            Library:Notify("加载成功", description or text .. "已加载", 3)
        end,
        DoubleClick = false,
    })
end

-- 添加玩家功能按钮
AddScriptButton(PlayerBox, "无限跳", "https://pastebin.com/raw/V5PQy3y0")
AddScriptButton(PlayerBox, "踏空行走", 'https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Float')
AddScriptButton(PlayerBox, "穿墙", "https://raw.githubusercontent.com/TtmScripter/OtherScript/main/Noclip")
AddScriptButton(PlayerBox, "飞行", "\108\111\97\100\115\116\114\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\34\104\116\116\112\115\58\47\47\112\97\115\116\101\98\105\110\46\99\111\109\47\114\97\119\47\90\66\122\99\84\109\49\102\34\41\41\40\41\10")

-- 右侧玩家功能
AddScriptButton(PlayerBoxRight, "偷别人物品栏", function()
    for i, v in pairs(game.Players:GetChildren()) do
        wait()
        for i, b in pairs(v.Backpack:GetChildren()) do
            b.Parent = game.Players.LocalPlayer.Backpack
        end
    end
end)

AddScriptButton(PlayerBoxRight, "飞车(E)(别人看到)", "https://pastebin.com/raw/G3GnBCyC")
AddScriptButton(PlayerBoxRight, "无头", "https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/假无头.lua")
AddScriptButton(PlayerBoxRight, "无敌", function()
    local lp = game:GetService("Players").LocalPlayer
    if lp.Character:FindFirstChild("Head") then
        local char = lp.Character
        char.Archivable = true
        local new = char:Clone()
        new.Parent = workspace
        lp.Character = new
        wait(2)
        local oldhum = char:FindFirstChildWhichIsA("Humanoid")
        local newhum = oldhum:Clone()
        newhum.Parent = char
        newhum.RequiresNeck = false
        oldhum.Parent = nil
        wait(2)
        lp.Character = char
        new:Destroy()
        wait(1)
        newhum:GetPropertyChangedSignal("Health"):Connect(function()
            if newhum.Health <= 0 then
                oldhum.Parent = lp.Character
                wait(1)
                oldhum:Destroy()
            end
        end)
        workspace.CurrentCamera.CameraSubject = char
        if char:FindFirstChild("Animate") then
            char.Animate.Disabled = true
            wait(0.1)
            char.Animate.Disabled = false
        end
        lp.Character:FindFirstChild("Head"):Destroy()
    end
end)

AddScriptButton(PlayerBoxRight, "无敌少侠飞行", "https://rawscripts.net/raw/Universal-Script-Invinicible-Flight-R15-45414")
AddScriptButton(PlayerBoxRight, "取消坠落伤害", "http://rawscripts.net/raw/Universal-Script-Touch-fling-script-22447")
AddScriptButton(PlayerBoxRight, "玩家控制", "https://raw.githubusercontent.com/krlpl/dfhj/main/%E6%AD%BB%E4%BA%A1%E7%AC%94%E8%AE%B0.txt")
AddScriptButton(PlayerBoxRight, "旋转", 'https://pastebin.com/raw/r97d7dS0')
AddScriptButton(PlayerBoxRight, "爬墙", "https://pastebin.com/raw/zXk4Rq2r")
AddScriptButton(PlayerBoxRight, "改碰撞箱", 'https://pastebin.com/raw/JYFXjEVh')

-- 透视功能
PlayerBoxRight:AddButton({
    Text = "透视",
    Func = function()
        local FillColor = Color3.fromRGB(175, 25, 255)
        local DepthMode = "AlwaysOnTop"
        local FillTransparency = 0.5
        local OutlineColor = Color3.fromRGB(255, 255, 255)
        local OutlineTransparency = 0

        local CoreGui = game:FindService("CoreGui")
        local Players = game:FindService("Players")
        local lp = Players.LocalPlayer
        local connections = {}

        local Storage = Instance.new("Folder")
        Storage.Parent = CoreGui
        Storage.Name = "Highlight_Storage"

        local function Highlight(plr)
            local Highlight = Instance.new("Highlight")
            Highlight.Name = plr.Name
            Highlight.FillColor = FillColor
            Highlight.DepthMode = DepthMode
            Highlight.FillTransparency = FillTransparency
            Highlight.OutlineColor = OutlineColor
            Highlight.OutlineTransparency = 0
            Highlight.Parent = Storage
            
            local plrchar = plr.Character
            if plrchar then
                Highlight.Adornee = plrchar
            end

            connections[plr] = plr.CharacterAdded:Connect(function(char)
                Highlight.Adornee = char
            end)
        end

        Players.PlayerAdded:Connect(Highlight)
        for i, v in next, Players:GetPlayers() do
            Highlight(v)
        end

        Players.PlayerRemoving:Connect(function(plr)
            local plrname = plr.Name
            if Storage[plrname] then
                Storage[plrname]:Destroy()
            end
            if connections[plr] then
                connections[plr]:Disconnect()
            end
        end)
        
        Library:Notify("透视已开启", "玩家透视已启用", 3)
    end,
    DoubleClick = false,
})

-- 重置角色按钮
PlayerBox:AddButton({
    Text = "重置角色",
    Func = function()
        local player = game.Players.LocalPlayer
        if player.Character then
            player.Character:BreakJoints()
        end
        Library:Notify("重置成功", "角色已重置", 2)
    end,
    DoubleClick = false,
})

-- 墨水游戏标签页
local MainBox = Tabs.Main:AddLeftGroupbox("墨水游戏脚本")
local MiscBoxRight = Tabs.Main:AddRightGroupbox("关于")

AddScriptButton(MainBox, "AX秋辞汉化", "https://raw.githubusercontent.com/fningna51-stack/-/main/ax%E8%84%9A%E6%9C%AC%E7%A7%8B%E8%BE%9E%E6%B1%89%E5%8C%96")
AddScriptButton(MainBox, "墨水游戏ringta", "https://raw.githubusercontent.com/hdjsjjdgrhj/script-hub/refs/heads/main/Ringta")
AddScriptButton(MainBox, "墨水游戏boren汉化脚本", "https://pastebin.com/raw/Q64rPkwu")
AddScriptButton(MainBox, "墨水游戏unm汉化", "https://pastebin.com/raw/Cq7144NJ")

-- 99夜标签页
local sbbnBox = Tabs.sbbn:AddLeftGroupbox("99夜脚本")
AddScriptButton(sbbnBox, "99夜ringta", "https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/99Cps%20natural.lua")
AddScriptButton(sbbnBox, "虚空99夜", "https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/nightsintheforest.lua")
AddScriptButton(sbbnBox, "99夜kenny汉化", "https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/99Cps%20natural.lua")

-- DOORS标签页
local qwerBox = Tabs.qwer:AddLeftGroupbox("DOORS脚本")
AddScriptButton(qwerBox, "DOORS AX", "https://raw.githubusercontent.com/Xingtaiduan/Script/refs/heads/main/Games/Doors.lua")
AddScriptButton(qwerBox, "DOORS 汉化", "https://raw.githubusercontent.com/Cucumber190/roblox-/main/abysall%20Qcumber.lua")

-- 死铁轨标签页
local tyuiBox = Tabs.tyui:AddLeftGroupbox("死铁轨功能")
AddScriptButton(tyuiBox, "死铁轨红叶英文", "https://getnative.cc/script/loader")
AddScriptButton(tyuiBox, "死铁轨人机脚本", "https://raw.githubusercontent.com/gumanba/Scripts/refs/heads/main/DeadRails")
AddScriptButton(tyuiBox, "死铁轨仿红叶（刷债券好用）", "https://rawscripts.net/raw/Dead-Rails-Alpha-FLY-in-Dead-Rails-One-Click-Script-KEYLESS-by-Moondiety-39179")

-- 关于信息
MiscBoxRight:AddLabel("QC缝合脚本")
MiscBoxRight:AddLabel("作者: ks秋辞（roblox）")
MiscBoxRight:AddLabel("版本: 3.0")
MiscBoxRight:AddLabel("这是一个集合了多种游戏脚本的UI界面")
MiscBoxRight:AddLabel("UI：黑曜石ui界面")
MiscBoxRight:AddLabel("该脚本为免费版本，无需卡密")
MiscBoxRight:AddLabel("代码有时候加密有时候不加密，可以去网址看看源代码，方便你们找到想要的脚本")
MiscBoxRight:AddLabel("关注我！给兄弟们推荐好玩的墨水游戏脚本")

-- 设置标签页
local MenuGroup = Tabs.Settings:AddLeftGroupbox('菜单')
MenuGroup:AddButton('卸载脚本', function() 
    Library:Unload() 
    Library:Notify("脚本已卸载", "秋辞缝合脚本已关闭", 3)
end)

MenuGroup:AddLabel('菜单快捷键'):AddKeyPicker('MenuKeybind', { 
    Default = 'RightShift', 
    NoUI = true, 
    Text = '菜单热键' 
})

Library.ToggleKeybind = Options.MenuKeybind

-- 初始化主题管理器
ThemeManager:SetLibrary(Library)
ThemeManager:SetFolder("QC_Script_Theme")
ThemeManager:ApplyToTab(Tabs.Settings)

-- 初始化保存管理器
SaveManager:SetLibrary(Library)
SaveManager:SetFolder("QC_Script_Config")
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
SaveManager:BuildConfigSection(Tabs.Settings)
SaveManager:Save()

-- 显示成功消息
Library:Notify("脚本已加载", "欢迎使用秋辞缝合脚本免费版", 5)
print("秋辞缝合脚本已全部加载完成！")
