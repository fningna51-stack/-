-- 卡密验证系统（添加在脚本最前面）
local function CheckLicense()
    -- 预设的有效卡密列表
    local validLicenses = {
        "ks小秋4588",  -- 示例卡密
    }
    
    -- 创建卡密输入界面
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "LicenseGui"
    screenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 350, 0, 250)
    frame.Position = UDim2.new(0.5, -175, 0.5, -125)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    frame.BorderSizePixel = 0
    frame.Parent = screenGui
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0, 350, 0, 50)
    title.Position = UDim2.new(0, 0, 0, 10)
    title.Text = "秋风脚本 - 卡密验证"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.BackgroundTransparency = 1
    title.Parent = frame
    
    local desc = Instance.new("TextLabel")
    desc.Size = UDim2.new(0, 330, 0, 40)
    desc.Position = UDim2.new(0, 10, 0, 60)
    desc.Text = "请输入您的卡密以继续使用脚本"
    desc.TextColor3 = Color3.fromRGB(200, 200, 200)
    desc.Font = Enum.Font.Gotham
    desc.TextSize = 16
    desc.BackgroundTransparency = 1
    desc.Parent = frame
    
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(0, 330, 0, 40)
    inputBox.Position = UDim2.new(0, 10, 0, 110)
    inputBox.PlaceholderText = "在此输入您的卡密"
    inputBox.Text = ""
    inputBox.ClearTextOnFocus = false
    inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    inputBox.BorderSizePixel = 0
    inputBox.Font = Enum.Font.Gotham
    inputBox.TextSize = 16
    inputBox.Parent = frame
    
    local submitButton = Instance.new("TextButton")
    submitButton.Size = UDim2.new(0, 330, 0, 40)
    submitButton.Position = UDim2.new(0, 10, 0, 160)
    submitButton.Text = "验证卡密"
    submitButton.BackgroundColor3 = Color3.fromHex("4F46E5")
    submitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    submitButton.Font = Enum.Font.GothamBold
    submitButton.TextSize = 16
    submitButton.BorderSizePixel = 0
    submitButton.Parent = frame
    
    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(0, 330, 0, 30)
    messageLabel.Position = UDim2.new(0, 10, 0, 210)
    messageLabel.Text = ""
    messageLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    messageLabel.Font = Enum.Font.Gotham
    messageLabel.TextSize = 14
    messageLabel.BackgroundTransparency = 1
    messageLabel.Parent = frame
    
    -- 验证函数
    local function VerifyLicense(license)
        for _, validLicense in ipairs(validLicenses) do
            if license == validLicense then
                return true
            end
        end
        return false
    end
    
    -- 等待用户输入并验证
    local verified = false
    submitButton.MouseButton1Click:Connect(function()
        local license = inputBox.Text:gsub("%s+", "") -- 去除空格
        
        if license == "" then
            messageLabel.Text = "请输入卡密！"
            return
        end
        
        if VerifyLicense(license) then
            messageLabel.Text = "验证成功，正在加载脚本..."
            messageLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            verified = true
            wait(1)
            screenGui:Destroy()
        else
            messageLabel.Text = "卡密无效，请重试"
            messageLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
    end)
    
    -- 等待验证通过
    repeat wait() until verified
    return true
end

-- 执行卡密验证
if not CheckLicense() then
    return
end

-- ... 其余原有代码保持不变 ...
local Window = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))():CreateWindow({
    Title = "秋风脚本",
    Icon = "star",
    Author = "脚本开发者快手小秋",
    Folder = "ScriptHub",
    Size = UDim2.fromOffset(600, 400),
    Transparent = true,
    Theme = "Dark",
    User = {
        Enabled = true,
        Callback = function() 
            print("用户信息被点击") 
        end,
        Anonymous = false
    },
})

Window:EditOpenButton({
    Title = "打开脚本菜单",
    Icon = "grid",
    CornerRadius = UDim.new(0, 12),
    StrokeThickness = 1,
    Color = ColorSequence.new(
        Color3.fromHex("4F46E5"),
        Color3.fromHex("EC4899")
    ),
    Draggable = true,
})

local MainTab = Window:Tab({Title = "通用脚本", Icon = "home"})
local PlayerTab = Window:Tab({Title = "玩家设置", Icon = "user"})
local GameTab = Window:Tab({Title = "99夜脚本", Icon = "gamepad"})
local VisualTab = Window:Tab({Title = "视觉效果", Icon = "eye"})
local MiscTab = Window:Tab({Title = "死铁轨", Icon = "settings"})

MainTab:Button({Title = "自然灾害通用脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/2dgeneralspam1/scripts-and-stuff/master/scripts/LoadstringUjHI6RQpz2o8", true))()
    print("自然灾害通用脚本已加载")
end})

MainTab:Button({Title = "灾害黑洞脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/%E5%8F%8C%E7%8E%AF%E6%8E%A7%E5%88%B6%E9%BB%91%E6%B4%9E.txt"))()
    print("灾害黑洞脚本已加载")
end})

MainTab:Button({Title = "r15飞行脚本", Callback = function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Invinicible-Flight-R15-45414"))()
    print("r15脚本已加载")
end})

MainTab:Button({Title = "r6飞行脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/%E6%97%A0%E6%95%8C%E5%B0%91%E4%BE%A0%E9%A3%9E%E8%A1%8Cr6.txt"))()
    print("r6飞行已加载")
end})

MainTab:Button({Title = "叶脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/roblox-ye/QQ515966991/refs/heads/main/ROBLOX-CNVIP-XIAOYE.lua"))()
    print("叶脚本已加载")
end})

MainTab:Button({Title = "皮脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
    print("皮脚本已加载")
end})

MainTab:Button({Title = "秋容脚本", Callback = function()
    loadstring(game:HttpGet("\104\116\116\112\115\58\47\47\114\97\119\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\81\82\56\54\56\54\47\56\56\54\47\114\101\102\115\47\104\101\97\100\115\47\109\97\105\110\47\66\71\72"))()
    print("秋容脚本已加载")
end})

MainTab:Button({Title = "皮空脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/smalldesikon/vv/1647f5471c89de3fba6b2f7d783173a4d51a2f54/%E5%8D%A1%E5%AF%86%E7%B3%BB%E7%BB%9F.lua"))()
    print("皮空脚本已加载")
end})

PlayerTab:Toggle({Title = "无限跳跃", Value = false, Callback = function(state)
    if state then
        loadstring(game:HttpGet("https://example.com/infinitejump.lua"))()
        print("无限跳跃已启用")
    else
        print("无限跳跃已禁用")
    end
end})

PlayerTab:Slider({Title = "移动速度", Step = 1, Value = {Min = 16, Max = 200, Default = 16}, Callback = function(value)
    if game.Players.LocalPlayer.Character then
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = value
        print("移动速度设置为: " .. value)
    end
end})

PlayerTab:Slider({Title = "跳跃高度", Step = 1, Value = {Min = 50, Max = 200, Default = 50}, Callback = function(value)
    if game.Players.LocalPlayer.Character then
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = value
        print("跳跃高度设置为: " .. value)
    end
end})

GameTab:Button({Title = "力量传奇脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/jiankeQWQ/JianKeStudio/main/liliangchuanqi"))()
    print("力量传奇脚本已启用")
end})

GameTab:Button({Title = "doors最强脚本", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/YxZad/wdwadXz/refs/heads/main/YEHAX.lua"))()
    print("doors最强脚本已启用")
end})

GameTab:Button({Title = "doors主播同款", Callback = function()
    loadstring(game:HttpGet(("https://raw.githubusercontent.com/mstudio45/poopdoors_edited/main/poopdoors_edited.lua"),true))() 
    print("doors主播同款已启用")
end})

GameTab:Button({Title = "xa脚本doors", Callback = function()
    --[[Doors Blackking And BobHub脚本汉化]]loadstring(game:HttpGet("\104\116\116\112\115\58\47\47\112\97\115\116\101\98\105\110\46\99\111\109\47\114\97\119\47\54\53\84\119\84\56\106\97"))()
    print("xa脚本doors已启用")
end})

GameTab:Button({Title = "99夜汉化虚空", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ke9460394-dot/ugik/refs/heads/main/99%E5%A4%9C%E8%99%9A%E7%A9%BA.txt"))()
    print("99夜汉化虚空已启用")
end})

GameTab:Button({Title = "op级汉化", Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/hdjsjjdgrhj/script-hub/refs/heads/main/99Nights"))()
    print("op级汉化已启用")
end})

VisualTab:Toggle({Title = "夜视模式", Value = false, Callback = function(state)
    if state then
        game.Lighting.Ambient = Color3.new(1, 1, 1)
        game.Lighting.Brightness = 2
        print("夜视模式已启用")
    else
        game.Lighting.Ambient = Color3.new(0, 0, 0)
        game.Lighting.Brightness = 1
        print("夜视模式已禁用")
    end
end})

VisualTab:Toggle({Title = "全亮度", Value = false, Callback = function(state)
    if state then
        game.Lighting.GlobalShadows = false
        print("全亮度已启用")
    else
        game.Lighting.GlobalShadows = true
        print("全亮度已禁用")
    end
end})

VisualTab:Slider({Title = "视野距离", Step = 1, Value = {Min = 100, Max = 10000, Default = 1000}, Callback = function(value)
    game.Lighting.FogEnd = value
    print("视野距离设置为: " .. value)
end})

MiscTab:Button({Title = "死铁轨传送脚本", Callback = function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/refs/heads/main/DeadRails", true))()
    print("死铁轨传送脚本已加载")
end})

MiscTab:Button({Title = "死铁轨攻速脚本", Callback = function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/HeadHarse/DeadRails/refs/heads/main/V4SWING"))()
    print("死铁轨攻速脚本已加载")
end})

MiscTab:Button({Title = "红叶", Callback = function()
(loadstring or load)(game:HttpGet("https://getnative.cc/script/loader"))()
    print("红叶已加载")
end})

MiscTab:Button({Title = "仿红叶", Callback = function()
loadstring(game:HttpGet("https://rawscripts.net/raw/Dead-Rails-Alpha-FLY-in-Dead-Rails-One-Click-Script-KEYLESS-by-Moondiety-39179"))()
    print("仿红叶已加载")
end})

MiscTab:Separator({Text = "工具类"})

MiscTab:Button({Title = "复制游戏ID", Callback = function()
    setclipboard(tostring(game.PlaceId))
    print("游戏ID已复制到剪贴板")
end})

MiscTab:Button({Title = "复制玩家ID", Callback = function()
    setclipboard(tostring(game.Players.LocalPlayer.UserId))
    print("玩家ID已复制到剪贴板")
end})

print("脚本UI已加载完成！")
print("使用鼠标点击屏幕上的按钮打开菜单")
